
<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Date IdeeÃ«n Generator â€“ Gratis AI Tool</title>
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <script defer src="https://cdn.jsdelivr.net/npm/@xenova/transformers@2.6.0" crossorigin="anonymous" onload="window.TRANSFORMERS_READY=true" onerror="window.TRANSFORMERS_ERROR=true"></script>
  <script>
    window.readyForAI = new Promise((resolve) => {
      window.addEventListener('load', () => {
        setTimeout(() => resolve(window), 0);
      });
    });

    const state = { pipeline: null };

    async function waitForTransformers(ms = 20000) {
      const start = Date.now();
      return new Promise((resolve, reject) => {
        (function check(){
          if (window.transformers && typeof window.transformers.pipeline === 'function') return resolve(window.transformers);
          if (window.TRANSFORMERS_ERROR) return reject(new Error('transformers.js kon niet laden (CDN geblokkeerd of offline).'));
          if (Date.now() - start > ms) return reject(new Error('Timeout: transformers.js niet beschikbaar.'));
          requestAnimationFrame(check);
        })();
      });
    }

    async function ensurePipeline() {
      if (state.pipeline) return state.pipeline;
      const loadNote = document.getElementById('load-note');
      loadNote.classList.remove('hidden');
      loadNote.textContent = 'Model ladenâ€¦ dit kan 20â€“60s duren (eenmalig).';

      try {
        const { pipeline } = await waitForTransformers();
        const pipe = await pipeline('text2text-generation', 'Xenova/t5-small', {
          progress_callback: (p) => {
            const pct = p.progress ? Math.round(p.progress * 100) : 0;
            loadNote.textContent = `Model ladenâ€¦ ${pct}%`;
          },
        });
        state.pipeline = pipe;
        loadNote.classList.add('hidden');
        return pipe;
      } catch (err) {
        loadNote.classList.add('hidden');
        throw err;
      }
    }

    function setBusy(isBusy) {
      const btn = document.getElementById('run-btn');
      btn.disabled = isBusy;
      btn.textContent = isBusy ? 'Bezigâ€¦' : 'Genereer';
    }

    async function runTool() {
      const thema = document.getElementById('input').value.trim() || 'verrassing';
      const out = document.getElementById('output');
      out.value = '';

      setBusy(true);
      try {
        const pipe = await ensurePipeline();
        const prompt = `Geef 10 originele, goedkope date-ideeÃ«n in het Nederlands. Thema: ${thema}. Formatteer als genummerde lijst met korte zinnen.`;
        const outArr = await pipe(prompt, { max_new_tokens: 180 });
        out.value = outArr[0].generated_text.trim();
      } catch (e) {
        console.error(e);
        const loadNote = document.getElementById('load-note');
        loadNote.classList.add('hidden');
        const hint = e && e.message && e.message.includes('transformers.js')
          ? '
Tip: staat een adblocker of netwerkfilter aan dat cdn.jsdelivr.net of huggingface.co blokkeert? Probeer incognito of een andere browser/Wiâ€‘Fi.'
          : '';
        alert('Er ging iets mis. ' + (e && e.message ? e.message : '') + hint);
      } finally {
        setBusy(false);
      }
    }

    function copyOutput() {
      const out = document.getElementById('output');
      out.select();
      out.setSelectionRange(0, 99999);
      document.execCommand('copy');
      const badge = document.getElementById('copied');
      badge.classList.remove('hidden');
      setTimeout(() => badge.classList.add('hidden'), 1200);
    }
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-rose-50 text-slate-900 min-h-screen">
  <main class="max-w-3xl mx-auto p-6">
    <header class="mb-6 text-center">
      <h1 class="text-3xl font-bold tracking-tight">ðŸ’• Date IdeeÃ«n Generator</h1>
      <p class="text-slate-600">Draait 100% gratis in je browser met <code>transformers.js</code>. Geen APIâ€‘sleutel nodig.</p>
      <p id="load-note" class="text-sm text-amber-700 bg-amber-100 border border-amber-200 rounded-md px-3 py-2 mt-3 hidden"></p>
    </header>

    <div class="bg-white border rounded-2xl shadow-sm p-4">
      <label class="block text-sm font-medium mb-2" for="input">Thema (optioneel)</label>
      <input id="input" class="w-full border rounded-xl p-3 mb-4" placeholder="bijv. thuis, regenachtig weer" />

      <div class="flex items-center gap-3 mb-4">
        <button id="run-btn" onclick="runTool()" class="px-4 py-2 rounded-2xl bg-rose-600 text-white hover:bg-rose-500">Genereer</button>
        <span class="text-xs text-slate-500">Eerste keer moet het model laden.</span>
      </div>

      <label class="block text-sm font-medium mb-2" for="output">Uitvoer</label>
      <textarea id="output" rows="12" class="w-full border rounded-xl p-3 font-mono"></textarea>

      <div class="flex items-center gap-2 mt-3">
        <button onclick="copyOutput()" class="px-3 py-2 rounded-xl bg-slate-100 hover:bg-slate-200 border">Kopieer</button>
        <span id="copied" class="text-xs text-green-700 hidden">Gekopieerd!</span>
      </div>
    </div>

    <footer class="text-xs text-slate-500 mt-6 text-center">
      Gemaakt met <a class="underline" href="https://github.com/xenova/transformers.js" target="_blank" rel="noreferrer">transformers.js</a> en het model <code>Xenova/t5-small</code>.
    </footer>
  </main>
</body>
</html>


